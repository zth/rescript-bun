// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Stdlib from "@rescript/runtime/lib/es6/Stdlib.js";

let server = Bun.serve({
  port: 4000,
  fetch: async (req, _server) => {
    let url = new URL(req.url);
    let match = url.pathname;
    switch (match) {
      case "/" :
        return new Response(Bun.file("index.html"));
      case "/action" :
        let formData = await req.formData();
        formData.get("name");
        let profilePicture = formData.get("profilePicture");
        if (profilePicture === null) {
          return Stdlib.panic("Must upload a profile picture");
        }
        if (typeof profilePicture === "string") {
          return Stdlib.panic("Must upload a profile picture");
        }
        await Bun.write("profilePicture.png", Bun.file(profilePicture));
        return new Response("Success");
      default:
        return new Response("Not Found", {
          status: 404
        });
    }
  }
});

export {
  server,
}
/* server Not a pure module */
